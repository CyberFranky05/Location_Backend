# ============================================
# BACKEND ENVIRONMENT VARIABLES
# NestJS API Server Configuration
# ============================================

# Application
NODE_ENV=development
PORT=3000
APP_NAME=Location Auth Backend
API_PREFIX=api/v1

# ============================================
# SUPABASE CONFIGURATION
# ============================================
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Optional: Direct database connection
SUPABASE_DB_URL=postgresql://postgres:[PASSWORD]@db.xxxxx.supabase.co:5432/postgres

# ============================================
# KEYCLOAK CONFIGURATION
# ============================================
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_REALM=location-auth-realm
KEYCLOAK_CLIENT_ID=location-auth-backend
KEYCLOAK_CLIENT_SECRET=your-client-secret-here

# Alternative format for some Keycloak adapters
KEYCLOAK_AUTH_SERVER_URL=http://localhost:8080
KEYCLOAK_BEARER_ONLY=true
KEYCLOAK_SSL_REQUIRED=external

# ============================================
# JWT CONFIGURATION
# ============================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# ============================================
# GEOLOCATION API
# ============================================
# Option 1: IPApi (Free tier: 45 requests/min)
IPAPI_KEY=free
IPAPI_URL=https://ipapi.co

# Option 2: IPStack (Free tier: 10,000 requests/month)
# IPSTACK_KEY=your-ipstack-api-key
# IPSTACK_URL=http://api.ipstack.com

# Option 3: IP-API (Free, no key required, 45 requests/min)
# IPINFO_URL=http://ip-api.com/json

# ============================================
# CORS CONFIGURATION
# ============================================
CORS_ORIGIN=http://localhost:5173
CORS_CREDENTIALS=true

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# Auth endpoints specific rate limiting
AUTH_RATE_LIMIT_TTL=900
AUTH_RATE_LIMIT_MAX=5

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=debug
LOG_FORMAT=json

# ============================================
# SECURITY
# ============================================
# Password requirements (enforced by Keycloak)
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# Session
SESSION_SECRET=your-session-secret-key-change-this
SESSION_MAX_AGE=86400000

# ============================================
# PRODUCTION OVERRIDES
# ============================================
# When deploying to production, override these:
# NODE_ENV=production
# KEYCLOAK_URL=https://your-keycloak-domain.com
# CORS_ORIGIN=https://your-frontend-domain.com
# SUPABASE_URL=https://your-project.supabase.co
